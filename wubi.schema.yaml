# Rime äº”ç¬”è¾“å…¥æ³•é…ç½®
# åŸºäº86äº”ç¬”ï¼Œæ”¯æŒç®€ç¹åˆ‡æ¢ã€æ‹¼éŸ³åæŸ¥ã€è‹±æ–‡åˆ†è¯ç­‰åŠŸèƒ½

schema:
  schema_id: wubi
  name: "äº”ç¬”"
  version: "2026-01-13"
  author: Alamo
  description: |
    åŸºäº86äº”ç¬”ç¼–ç ï¼Œéƒ¨åˆ†ç ä½è¿›è¡Œè°ƒæ•´
    æ”¯æŒç®€ç¹åˆ‡æ¢ã€è‹±æ–‡åˆ†è¯ã€æ‹¼éŸ³åæŸ¥ã€æ—¥æœŸå¿«æ·è¾“å…¥
  dependencies:
    - English        # è‹±æ–‡è¾“å…¥ä¾èµ–

# ------- è¾“å…¥æ³•å¼€å…³é…ç½® -------
switches:
  - name: ascii_mode           # ä¸­è‹±æ–‡åˆ‡æ¢
    states: [ ä¸­, ï¼¡ ]
    reset: 1                   # é»˜è®¤è‹±æ–‡æ¨¡å¼
  - name: ascii_punct          # ä¸­è‹±æ ‡ç‚¹åˆ‡æ¢
    states: [ ã€‚, .  ]
    reset: 0                   # é»˜è®¤ä¸­æ–‡æ ‡ç‚¹
  - name: traditionalize       # ç®€ç¹è½¬æ¢
    states: [ ç®€, ç¹ ]
    reset: 0                   # é»˜è®¤ç®€ä½“
  - name: emoji                # Emojiå¼€å…³
    states: [ ğŸ’€, ğŸ˜„ ]
    reset: 1                   # é»˜è®¤å¼€å¯
  - name: full_shape           # å…¨è§’/åŠè§’åˆ‡æ¢
    states: [ åŠ, å…¨ ]
    reset: 0                   # é»˜è®¤åŠè§’

# ------- å¼•æ“é…ç½® -------
engine:
  processors:                  # å¤„ç†å™¨é“¾
    - ascii_composer           # ä¸­è‹±æ–‡åˆ‡æ¢å¤„ç†
    - recognizer               # æ¨¡å¼è¯†åˆ«ï¼ˆç½‘å€ã€æ—¥æœŸç­‰ï¼‰
    - key_binder               # æŒ‰é”®ç»‘å®š
    - speller                  # æ‹¼å†™å¤„ç†
    - punctuator               # æ ‡ç‚¹ç¬¦å·
    - selector                 # å€™é€‰é¡¹é€‰æ‹©
    - navigator                # å…‰æ ‡å¯¼èˆª
    - express_editor           # å¿«é€Ÿç¼–è¾‘
  segmentors:                  # æ–‡æœ¬åˆ†æ®µå™¨
    - ascii_segmentor          # è¥¿æ–‡æ®µè½
    - matcher                  # æ¨¡å¼åŒ¹é…
    - abc_segmentor            # æ–‡å­—æ®µè½
    - punct_segmentor          # æ ‡ç‚¹æ®µè½
    - fallback_segmentor       # åå¤‡æ®µè½
  translators:                 # ç¿»è¯‘å™¨
    - punct_translator         # æ ‡ç‚¹ç¿»è¯‘
    - reverse_lookup_translator # æ‹¼éŸ³åæŸ¥
    - table_translator         # ä¸»ç è¡¨ç¿»è¯‘
    - lua_translator@*date_translator      # æ—¥æœŸæ—¶é—´
    - lua_translator@*number_translato  r  # å¤§å†™æ•°å­—
    - history_translator@repeat_last_input # é‡å¤ä¸Šæ¬¡è¾“å…¥
    - table_translator@custom_phrase
    - table_translator@English             # è‹±æ–‡è¾“å…¥
  filters:                     # è¿‡æ»¤å™¨
    - simplifier@tradition     # ç®€ç¹è½¬æ¢
    - simplifier@emoji         # Emojiè½¬æ¢
    - lua_filter@*reduce_english_filter  # è‹±æ–‡é™é¢‘
    - lua_filter@*en_spacer             # è‹±æ–‡è‡ªåŠ¨ç©ºæ ¼
    - lua_filter@*long_word_filter      # é•¿è¯ä¼˜å…ˆ
    - lua_filter@*reduce_emoji_filter   #  Emojié™é¢‘

# ------- æ‹¼å†™å™¨é…ç½® -------
speller:
  auto_select: true            # ç¼–ç è¡¥å…¨æ—¶è‡ªåŠ¨ä¸Šå±
  delimiter: "`"               # éŸ³èŠ‚åˆ†éš”ç¬¦
  alphabet: "zyxwvutsrqponmlkjihgfedcbaZYXWVUTSRQPONMLKJIHGFEDCBA/"  # å…è®¸çš„å­—ç¬¦é›†
  auto_clear: max_length       # ç©ºç æ—¶è‡ªåŠ¨æ¸…å±
  algebra:                     # ä¸‡èƒ½Zé”®è§„åˆ™
    - derive/^(...).$/$1z/     # å››ç æ—¶æœ«ä½ç”¨Zæ›¿ä»£
    - derive/^(..).(.*)$/$1z$2/ # ä¸‰ç æ—¶ç¬¬ä¸‰ä½ç”¨Zæ›¿ä»£
    - derive/^(.).(.*)$/$1z$2/  # äºŒç æ—¶ç¬¬äºŒä½ç”¨Zæ›¿ä»£

# ------- ç¿»è¯‘å™¨é…ç½® -------
translator:
  dictionary: wubi             # ä¸»è¯åº“æ–‡ä»¶
  db_class: tabledb            # è¯åº“ç±»å‹ï¼šæ–‡æœ¬æ•°æ®åº“
  initial_quality: 1.0         # åˆå§‹æƒé‡
  enable_charset_filter: false # ç¦ç”¨å­—ç¬¦é›†è¿‡æ»¤
  enable_sentence: true        # å¯ç”¨æ™ºèƒ½ç»„å¥
  enable_encoder: false        # ç¦ç”¨è‡ªåŠ¨é€ è¯
  encode_commit_history: false # ç¦ç”¨å†å²è®°å½•é€ è¯
  max_phrase_length: 7         # æœ€å¤§è‡ªåŠ¨æˆè¯é•¿åº¦
  enable_completion: true      # å¯ç”¨ç¼–ç è¡¥å…¨
  enable_user_dict: true       # å¯ç”¨ç”¨æˆ·è¯å…¸
  user_dict: wubi_user         # ç”¨æˆ·è¯å…¸åç§°
  disable_user_dict_for_patterns:  # ç¦æ­¢å½•å…¥ç”¨æˆ·è¯å…¸çš„ç¼–ç æ¨¡å¼
    - "^z.*$"                  # Zå¼€å¤´çš„ç¼–ç ï¼ˆç‰¹æ®ŠåŠŸèƒ½ï¼‰
    - "^[a-y]{1,3}$"           # ä¸€ã€äºŒã€ä¸‰ç®€ç ä¸è°ƒé¢‘
  auto_select_pattern: "^[a-z]{4,}$"  # å››ç åŠä»¥ä¸Šè‡ªåŠ¨ä¸Šå±

# ------- Lua æ—¥æœŸæ—¶é—´è½¬æ¢é…ç½® -------
date_translator:
  date: rq       # æ—¥æœŸï¼š2022-11-29
  time: sj       # æ—¶é—´ï¼š18:13
  week: xq       # æ˜ŸæœŸï¼šæ˜ŸæœŸäºŒ
  datetime: dt   # ISO 8601ï¼š2022-11-29T18:13:11+08:00
  timestamp: ts  # æ—¶é—´æˆ³ï¼š1669716794

# ------- è‹±æ–‡è¾“å…¥é…ç½® -------
English:
  dictionary: English          # è‹±æ–‡è¯åº“
  enable_sentence: false       # ç¦ç”¨è‹±æ–‡é€ å¥
  enable_user_dict: false      # ç¦ç”¨è‹±æ–‡ç”¨æˆ·è¯å…¸
  initial_quality: 0.8         # æƒé‡ä½äºäº”ç¬”
  comment_format:              # æ¸…é™¤è‹±æ–‡æç¤ºç 
    - xform/.*//

# ------- è‹±æ–‡å•è¯é™é¢‘é…ç½® -------
reduce_english_filter:
  mode: custom                 # è‡ªå®šä¹‰æ¨¡å¼
  idx: 2                       # é™ä½åˆ°ç¬¬äºŒä½
  words: [aid, ann, bail, bait, bam, band, bans, bat, bay, bend, bent, benz, bib, bid, bien, biz, boc, bop, bos, bud, buf, cab, cad, cain, cam, cans, cap, cas, cef, chad, chan, chap, chef, cher, chew, chic, chin, chip, chit, coup, cum, cunt, cur, dab, dag, dal, dam, dent, dew, dial, diet, dim, din, dip, dis, dit, doug, dub, dug, dunn, fab, fax, fob, fog, foul, fur, gag, gail, gain, gal, gam, gaol, ged, gel, ger, guam, gus, gut, hail, ham, hank, hans, hat, hay, heil, heir, hem, hep, hud, hum, hung, hunk, hut, jim, jug, kat, lab, lad, lag, laid, lam, laos, lap, lat, lax, lay, led, leg, lex, liam, lib, lid, lied, lien, lies, linn, lip, lit, liz, lob, lug, lund, lung, lux, mag, maid, mann, mar, mat, med, mel, mend, mens, ment, mil, mins, mint, mob, moc, mod, mop, mos, mot, mud, mug, mum, nail, nap, nat, nay, neil, nib, nip, noun, nous, nun, nut, pac, paid, pail, pain, pair, pak, pal, pam, pans, pant, pap, par, pat, paw, pax, pens, pic, pier, pies, pins, pint, pit, pix, pod, pop, pos, pot, pour, pow, pub, rand, rant, rent, rep, res, ret, rex, rib, rid, rig, rim, rub, rug, rum, runs, sac, sail, sal, sam, sans, sap, saw, sax, sew, sham, shaw, shin, sig, sin, sip, sis, suit, sung, suns, sup, sur, sus, tad, tail, taj, tar, tax, tec, ted, tel, ter, tex, tic, tied, tier, ties, tim, tin, tit, tour, tout, tum, wag, wand, wap, wax, weir, won, yan, yen, zach]

#  ------- Emoji -------
emoji:
  opencc_config: emoji.json  # Emoji
  option_name: emoji         # å¯¹åº”å¼€å…³åç§°
  inherit_comment: false     # åœ¨ corrector.lua åŠåæŸ¥ä¸­ï¼Œemoji çš„ comment æ˜¾ç¤ºä¸ºç©º

#  ------- Emoji é™é¢‘è¿‡æ»¤å™¨é…ç½® -------
reduce_emoji_filter:
  mode: all   # æ¨¡å¼ï¼šallï¼ˆæ‰€æœ‰é»˜è®¤åˆ—è¡¨ä¸­çš„Emojiï¼‰, customï¼ˆè‡ªå®šä¹‰ï¼‰, noneï¼ˆç¦ç”¨ï¼‰
  idx: 3      # é™ä½åˆ°ç¬¬3ä¸ªä½ç½®ï¼ˆæ ¹æ®éœ€æ±‚è°ƒæ•´ï¼‰

#  ------- è‡ªå®šä¹‰çŸ­è¯­ï¼šcustom_phrase.txt -------
custom_phrase:
  dictionary: ""
  user_dict: custom_phrase  # å¯ä»¥ä¿®æ”¹è¿™é‡Œï¼Œæ”¹æˆè‡ªå·±çš„ txt æ–‡ä»¶
  db_class: stabledb        # åªè¯»æ•°æ®åº“ï¼Œæ— æ³•åŠ¨æ€è°ƒé¢‘ï¼›è®¾ä¸º tabledb å¯ä»¥åŠ¨æ€è°ƒé¢‘
  enable_completion: false  # è¡¥å…¨æç¤º
  enable_sentence: false    # ç¦æ­¢é€ å¥
  initial_quality: 2        # custom_phrase çš„æƒé‡åº”è¯¥æ¯” pinyin å’Œ melt_eng å¤§

# ------- ç®€ç¹è½¬æ¢é…ç½® -------
tradition:
  opencc_config: s2hk.json     # ç®€ä½“è½¬é¦™æ¸¯ç¹ä½“
  option_name: traditionalize  # å¯¹åº”å¼€å…³åç§°

# ------- æ‹¼éŸ³åæŸ¥é…ç½® -------
reverse_lookup:
  dictionary: pinyin_simp     # åæŸ¥ä½¿ç”¨çš„æ‹¼éŸ³è¯åº“
  prefix: "/"                 # åæŸ¥å‰ç¼€
  suffix: "'"                 # åæŸ¥åç¼€
  tips: [æ‹¼éŸ³]                # æç¤ºæ–‡æœ¬
  preedit_format:             # æ‹¼éŸ³æ ¼å¼è½¬æ¢
    - xform/([nl])v/$1Ã¼/      # nv â†’ nÃ¼, lv â†’ lÃ¼
    - xform/([nl])ue/$1Ã¼e/    # nue â†’ nÃ¼e, lue â†’ lÃ¼e
    - xform/([jqxy])v/$1u/    # jv â†’ ju, qv â†’ qu, xv â†’ xu, yv â†’ yu

# ------- æ ‡ç‚¹ç¬¦å·é…ç½® -------
punctuator:
  full_shape:
    ' ' : { commit: 'ã€€' }
    ',' : { commit: 'ï¼Œ' }
    '.' : { commit: 'ã€‚' }
    '<' : [ 'ã€Š', 'ã€ˆ', 'Â«', 'â€¹' ]
    '>' : [ 'ã€‹', 'ã€‰', 'Â»', 'â€º' ]
    '/' : [ 'ï¼', 'Ã·' ]
    '?' : { commit: 'ï¼Ÿ' }
    ';' : { commit: 'ï¼›' }
    ':' : { commit: 'ï¼š' }
    '''' : { pair: [ 'â€˜', 'ã€' ] }
    '"' : { pair: [ '"', '"Â·' ] }
    '\' : [ 'ã€', 'ï¼¼' ]
    '|' : [ 'Â·', 'ï½œ', 'Â§', 'Â¦' ]
    '`' : 'ï½€'
    '~' : 'ï½'
    '!' : { commit: 'ï¼' }
    '@' : [ 'ï¼ ', 'â˜¯' ]
    '#' : [ 'ï¼ƒ', 'âŒ˜' ]
    '%' : [ 'ï¼…', 'Â°', 'â„ƒ' ]
    '$' : [ 'ï¿¥', '$', 'â‚¬', 'Â£', 'Â¥', 'Â¢', 'Â¤' ]
    '^' : { commit: 'â€¦â€¦' }
    '&' : 'ï¼†'
    '*' : [ 'ï¼Š', 'Â·', 'ãƒ»', 'Ã—', 'â€»', 'â‚' ]
    '(' : 'ï¼ˆ'
    ')' : 'ï¼‰'
    '-' : 'ï¼'
    '_' : 'â€”â€”'
    '+' : 'ï¼‹'
    '=' : 'ï¼'
    '[' : [ 'ã€Œ', 'ã€', 'ã€”', 'ï¼»' ]
    ']' : [ 'ã€', 'ã€', 'ã€•', 'ï¼½' ]
    '{' : [ 'ã€', 'ã€–', 'ï½›' ]
    '}' : [ 'ã€', 'ã€—', 'ï½' ]
  half_shape:
    ',' : { commit: 'ï¼Œ' }
    '.' : { commit: 'ã€‚' }
    '<' : [ 'ã€Š', 'ã€ˆ', 'Â«', 'â€¹' ]
    '>' : [ 'ã€‹', 'ã€‰', 'Â»', 'â€º' ]
    '/' : [ 'ã€', '/', 'ï¼', 'Ã·' ]
    '?' : { commit: 'ï¼Ÿ' }
    ';' : { commit: 'ï¼›' }
    ':' : { commit: 'ï¼š' }
    '''' : { pair: [ 'â€˜', 'ã€' ] }
    '"' : { pair: [ '"', '"Â·' ] }
    '\' : [ 'ã€', '\', 'ï¼¼' ]
    '|' : [ 'Â·', '|', 'ï½œ', 'Â§', 'Â¦' ]
    '`' : '`'
    '~' : [ '~', 'ï½' ]
    '!' : { commit: 'ï¼' }
    '@' : '@'
    '#' : '#'
    '%' : [ '%', 'ï¼…', 'Â°', 'â„ƒ' ]
    '$' : [ 'ï¿¥', '$', 'â‚¬', 'Â£', 'Â¥', 'Â¢', 'Â¤' ]
    '^' : { commit: 'â€¦â€¦' }
    '&' : '&'
    '*' : [ '*', 'ï¼Š', 'Â·', 'ãƒ»', 'Ã—', 'â€»', 'â‚' ]
    '(' : 'ï¼ˆ'
    ')' : 'ï¼‰'
    '-' : '-'
    '_' : 'â€”â€”'
    '+' : '+'
    '=' : '='
    '[' : [ 'ã€Œ', 'ã€', 'ã€”', 'ï¼»' ]
    ']' : [ 'ã€', 'ã€', 'ã€•', 'ï¼½' ]
    '{' : [ 'ã€', 'ã€–', 'ï½›' ]
    '}' : [ 'ã€', 'ã€–', 'ï½' ]
  ascii_style:
    ',' : { commit: ',' }
    '.' : { commit: '.' }
    '<' : '<'
    '>' : '>'
    '/' : '/'
    '?' : { commit: '?' }
    ';' : { commit: ';' }
    ':' : { commit: ':' }
    "'" : "'"
    '"' : '"'
    '\' : '\'
    '|' : '|'
    '`' : '`'
    '~' : '~'
    '!' : { commit: '!' }
    '@' : '@'
    '#' : '#'
    '%' : '%'
    '$' : '$'
    '^' : '^'
    '&' : '&'
    '*' : '*'
    '(' : '('
    ')' : ')'
    '-' : '-'
    '_' : '_'
    '+' : '+'
    '=' : '='
    '[' : '['
    ']' : ']'
    '{' : '{'
    '}' : '}'

# ------- æŒ‰é”®ç»‘å®šé…ç½® -------
key_binder:
  import_preset: default       # å¯¼å…¥é»˜è®¤æŒ‰é”®ç»‘å®š
  bindings:
    - {accept: semicolon, send: 2, when: has_menu}       # ; é€‰æ‹©ç¬¬äºŒé¡¹
    - {accept: apostrophe, send: 3, when: has_menu}      # ' é€‰æ‹©ç¬¬ä¸‰é¡¹
    - {accept: Return, send: Shift+Enter, when: composing} # å›è½¦æ¢è¡Œ
    - {when: has_menu, accept: Tab, send: Page_Down}     # Tab å‘ä¸‹ç¿»é¡µ
    - {when: has_menu, accept: Shift+Tab, send: Page_Up} # Shift+Tab å‘ä¸Šç¿»é¡µ
    - {when: always, accept: Control+Shift+3, toggle: ascii_punct}  # åˆ‡æ¢æ ‡ç‚¹
    - {when: always, accept: Control+semicolon, toggle: ascii_punct}
    - {when: always, accept: Control+Shift+4, toggle: traditionalize} # ç®€ç¹åˆ‡æ¢

# ------- æ¨¡å¼è¯†åˆ«é…ç½® -------
recognizer:
  import_preset: default           # å¯¼å…¥é»˜è®¤æ¨¡å¼è¯†åˆ«
  patterns:
    reverse_lookup: "^/[a-z]*'?$"  # æ‹¼éŸ³åæŸ¥æ¨¡å¼
    date: "^rq$"                   # æ—¥æœŸæ¨¡å¼
    time: "^sj$"                   # æ—¶é—´æ¨¡å¼
    week: "^xq$"                   # æ˜ŸæœŸæ¨¡å¼
    datetime: "^dt$"               # å®Œæ•´æ—¶é—´æ¨¡å¼
    timestamp: "^ts$"              # æ—¶é—´æˆ³æ¨¡å¼
    url: "^(www[.]|https?:|ftp[.:]|mailto:|file:).*$|^[a-z]+[.].+$"  # URLæ¨¡å¼

# ------- é‡å¤è¾“å…¥é…ç½® -------
repeat_last_input:
  input: z            # è¾“å…¥ z é‡å¤ä¸Šæ¬¡ä¸Šå±å†…å®¹
  size: 1             # é‡å¤æ•°é‡ä¸º1
  initial_quality: 5  # è¾ƒé«˜ä¼˜å…ˆçº§

# ------- èœå•æ˜¾ç¤ºé…ç½® -------
menu:
  page_size: 7    # æ¯é¡µæ˜¾ç¤º5ä¸ªå€™é€‰é¡¹
  alternative_select_labels: [ 'Â¹', 'Â²', 'Â³', 'â´', 'âµ' , 'â¶' , 'â·' ]  # å¤‡é€‰æ ‡ç­¾ï¼ˆä¸Šæ ‡æ•°å­—ï¼‰